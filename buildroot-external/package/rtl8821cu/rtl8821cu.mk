RTL8821CU_VERSION = ced770c458ec56e00c9a60e487292f9c83bb2bf4
RTL8821CU_SITE = $(call github,ylxdzsw,rtl8821CU,$(RTL8821CU_VERSION))
RTL8821CU_LICENSE = GPL-2.0
RTL8821CU_LICENSE_FILES = LICENSE

RTL8821CU_MODULE_MAKE_OPTS = \
	CONFIG_RTL8821CU=m \
	KVER=$(LINUX_VERSION_PROBED) \
	KBASE=$(LINUX_DIR) \
	CROSS_COMPILE=$(TARGET_CROSS)

ifeq (arm, $(filter arm, $(KERNEL_ARCH)))
RTL8821CU_MODULE_MAKE_OPTS += CONFIG_PLATFORM_ARM_RPI=y
RTL8821CU_MODULE_MAKE_OPTS += CONFIG_PLATFORM_ARM64_RPI=y
else
RTL8821CU_MODULE_MAKE_OPTS += CONFIG_PLATFORM_I386_PC=y
endif

define RTL8821CU_LINUX_CONFIG_FIXUPS
	$(call KCONFIG_DISABLE_OPT,CONFIG_WERROR)
endef

$(eval $(kernel-module))
$(eval $(generic-package))
